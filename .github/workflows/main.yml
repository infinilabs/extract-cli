name: CI

on:
  pull_request:

jobs:
  # native-build:
  #   strategy:
  #     matrix:
  #       platform: [windows-latest, ubuntu-latest, macos-latest]

  #   runs-on: ${{ matrix.platform }} 

  #   steps:
  #   - uses: actions/checkout@v4

  #   - name: Build project
  #     shell: bash
  #     run: make build

  #   - name: show pkg
  #     shell: bash
  #     run: ls -al pkg

  #   - name: Run tests
  #     shell: bash
  #     run: make test
      
  native-build-run-docker:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Build project
      run: make build
    
    - name: move hello.pdf to pkg
      run: cp test_dir/hello.pdf pkg/

    - name: show pkg
      shell: bash
      run: ls -al pkg
    
    - name: Build the Docker image
      run: docker build . --file Dockerfile --tag extract-cli-test

    - name: Run the container
      run: docker run extract-cli-test